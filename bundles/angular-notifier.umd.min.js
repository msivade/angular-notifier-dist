!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("@angular/core"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-notifier",["exports","@angular/core","rxjs","@angular/common"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self)["angular-notifier"]={},t.ng.core,t.rxjs,t.ng.common)}(this,(function(t,i,e,n){"use strict";var o=function(t){this.template=null,Object.assign(this,t),void 0===t.id&&(this.id="ID_"+(new Date).getTime())},s=function(){function t(){this.actionStream=new e.Subject,this.actionQueue=[],this.isActionInProgress=!1}return t.prototype.push=function(t){this.actionQueue.push(t),this.tryToRunNextAction()},t.prototype.continue=function(){this.isActionInProgress=!1,this.tryToRunNextAction()},t.prototype.tryToRunNextAction=function(){this.isActionInProgress||0===this.actionQueue.length||(this.isActionInProgress=!0,this.actionStream.next(this.actionQueue.shift()))},t}();s.ɵfac=function(t){return new(t||s)},s.ɵprov=i.ɵɵdefineInjectable({token:s,factory:s.ɵfac});var r=new i.InjectionToken("[angular-notifier] Notifier Options"),a=new i.InjectionToken("[anuglar-notifier] Notifier Config"),c=function(t){void 0===t&&(t={}),this.animations={enabled:!0,hide:{easing:"ease",offset:50,preset:"fade",speed:300},overlap:150,shift:{easing:"ease",speed:300},show:{easing:"ease",preset:"slide",speed:300}},this.behaviour={autoHide:7e3,onClick:!1,onMouseover:"pauseAutoHide",showDismissButton:!0,stacking:4},this.position={horizontal:{distance:12,position:"left"},vertical:{distance:12,gap:10,position:"bottom"}},this.theme="material",void 0!==t.theme&&(this.theme=t.theme),void 0!==t.animations&&(void 0!==t.animations.enabled&&(this.animations.enabled=t.animations.enabled),void 0!==t.animations.overlap&&(this.animations.overlap=t.animations.overlap),void 0!==t.animations.hide&&Object.assign(this.animations.hide,t.animations.hide),void 0!==t.animations.shift&&Object.assign(this.animations.shift,t.animations.shift),void 0!==t.animations.show&&Object.assign(this.animations.show,t.animations.show)),void 0!==t.behaviour&&Object.assign(this.behaviour,t.behaviour),void 0!==t.position&&(void 0!==t.position.horizontal&&Object.assign(this.position.horizontal,t.position.horizontal),void 0!==t.position.vertical&&Object.assign(this.position.vertical,t.position.vertical))},f=function(){function t(t,i){this.queueService=t,this.config=i}return t.prototype.getConfig=function(){return this.config},t.prototype.show=function(t){this.queueService.push({payload:t,type:"SHOW"})},t.prototype.hide=function(t){this.queueService.push({payload:t,type:"HIDE"})},t.prototype.hideNewest=function(){this.queueService.push({type:"HIDE_NEWEST"})},t.prototype.hideOldest=function(){this.queueService.push({type:"HIDE_OLDEST"})},t.prototype.hideAll=function(){this.queueService.push({type:"HIDE_ALL"})},t.prototype.notify=function(t,i,e){var n={message:i,type:t};void 0!==e&&(n.id=e),this.show(n)},t}();f.ɵfac=function(t){return new(t||f)(i.ɵɵinject(s),i.ɵɵinject(a))},f.ɵprov=i.ɵɵdefineInjectable({token:f,factory:f.ɵfac});var h=function(){function t(){this.now=0,this.remaining=0}return t.prototype.start=function(t){var i=this;return new Promise((function(e,n){i.remaining=t,i.finishPromiseResolver=e,i.continue()}))},t.prototype.pause=function(){clearTimeout(this.timerId),this.remaining-=(new Date).getTime()-this.now},t.prototype.continue=function(){var t=this;this.now=(new Date).getTime(),this.timerId=window.setTimeout((function(){t.finish()}),this.remaining)},t.prototype.stop=function(){clearTimeout(this.timerId),this.remaining=0},t.prototype.finish=function(){this.finishPromiseResolver()},t}();h.ɵfac=function(t){return new(t||h)},h.ɵprov=i.ɵɵdefineInjectable({token:h,factory:h.ɵfac});var p={hide:function(){return{from:{opacity:"1"},to:{opacity:"0"}}},show:function(){return{from:{opacity:"0"},to:{opacity:"1"}}}},u={hide:function(t){var i,e,n=t.component.getConfig(),o=t.component.getShift();if("left"===n.position.horizontal.position)i={transform:"translate3d( 0, "+o+"px, 0 )"},e={transform:"translate3d( calc( -100% - "+n.position.horizontal.distance+"px - 10px ), "+o+"px, 0 )"};else if("right"===n.position.horizontal.position)i={transform:"translate3d( 0, "+o+"px, 0 )"},e={transform:"translate3d( calc( 100% + "+n.position.horizontal.distance+"px + 10px ), "+o+"px, 0 )"};else{i={transform:"translate3d( -50%, "+o+"px, 0 )"},e={transform:"translate3d( -50%, "+("top"===n.position.vertical.position?"calc( -100% - "+n.position.horizontal.distance+"px - 10px )":"calc( 100% + "+n.position.horizontal.distance+"px + 10px )")+", 0 )"}}return{from:i,to:e}},show:function(t){var i,e,n=t.component.getConfig();if("left"===n.position.horizontal.position)i={transform:"translate3d( calc( -100% - "+n.position.horizontal.distance+"px - 10px ), 0, 0 )"},e={transform:"translate3d( 0, 0, 0 )"};else if("right"===n.position.horizontal.position)i={transform:"translate3d( calc( 100% + "+n.position.horizontal.distance+"px + 10px ), 0, 0 )"},e={transform:"translate3d( 0, 0, 0 )"};else{i={transform:"translate3d( -50%, "+("top"===n.position.vertical.position?"calc( -100% - "+n.position.horizontal.distance+"px - 10px )":"calc( 100% + "+n.position.horizontal.distance+"px + 10px )")+", 0 )"},e={transform:"translate3d( -50%, 0, 0 )"}}return{from:i,to:e}}},m=function(){function t(){this.animationPresets={fade:p,slide:u}}return t.prototype.getAnimationData=function(t,i){var e,n,o;return"show"===t?(e=this.animationPresets[i.component.getConfig().animations.show.preset].show(i),n=i.component.getConfig().animations.show.speed,o=i.component.getConfig().animations.show.easing):(e=this.animationPresets[i.component.getConfig().animations.hide.preset].hide(i),n=i.component.getConfig().animations.hide.speed,o=i.component.getConfig().animations.hide.easing),{keyframes:[e.from,e.to],options:{duration:n,easing:o,fill:"forwards"}}},t}();m.ɵfac=function(t){return new(t||m)},m.ɵprov=i.ɵɵdefineInjectable({token:m,factory:m.ɵfac});var l=function(t){return{notification:t}};function d(t,e){if(1&t&&i.ɵɵelementContainer(0,2),2&t){var n=i.ɵɵnextContext();i.ɵɵproperty("ngTemplateOutlet",n.notification.template)("ngTemplateOutletContext",i.ɵɵpureFunction1(2,l,n.notification))}}function g(t,e){if(1&t){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"button",5),i.ɵɵlistener("click",(function(){return i.ɵɵrestoreView(n),i.ɵɵnextContext(2).onClickDismiss()})),i.ɵɵnamespaceSVG(),i.ɵɵelementStart(1,"svg",6),i.ɵɵelement(2,"path",7),i.ɵɵelementEnd(),i.ɵɵelementEnd()}}function v(t,e){if(1&t&&(i.ɵɵelementStart(0,"p",3),i.ɵɵtext(1),i.ɵɵelementEnd(),i.ɵɵtemplate(2,g,3,0,"button",4)),2&t){var n=i.ɵɵnextContext();i.ɵɵadvance(1),i.ɵɵtextInterpolate(n.notification.message),i.ɵɵadvance(1),i.ɵɵproperty("ngIf",n.config.behaviour.showDismissButton)}}var y=function(){function t(t,e,n,o,s){this.config=n.getConfig(),this.ready=new i.EventEmitter,this.dismiss=new i.EventEmitter,this.timerService=o,this.animationService=s,this.renderer=e,this.element=t.nativeElement,this.elementShift=0}return t.prototype.ngAfterViewInit=function(){this.setup(),this.elementHeight=this.element.offsetHeight,this.elementWidth=this.element.offsetWidth,this.ready.emit(this)},t.prototype.getConfig=function(){return this.config},t.prototype.getHeight=function(){return this.elementHeight},t.prototype.getWidth=function(){return this.elementWidth},t.prototype.getShift=function(){return this.elementShift},t.prototype.show=function(){var t=this;return new Promise((function(i,e){if(t.config.animations.enabled&&t.config.animations.show.speed>0){for(var n=t.animationService.getAnimationData("show",t.notification),o=Object.keys(n.keyframes[0]),s=o.length-1;s>=0;s--)t.renderer.setStyle(t.element,o[s],n.keyframes[0][o[s]]);t.renderer.setStyle(t.element,"visibility","visible"),t.element.animate(n.keyframes,n.options).onfinish=function(){t.startAutoHideTimer(),i()}}else t.renderer.setStyle(t.element,"visibility","visible"),t.startAutoHideTimer(),i()}))},t.prototype.hide=function(){var t=this;return new Promise((function(i,e){if(t.stopAutoHideTimer(),t.config.animations.enabled&&t.config.animations.hide.speed>0){var n=t.animationService.getAnimationData("hide",t.notification);t.element.animate(n.keyframes,n.options).onfinish=function(){i()}}else i()}))},t.prototype.shift=function(t,i){var e=this;return new Promise((function(n,o){var s;s="top"===e.config.position.vertical.position&&i||"bottom"===e.config.position.vertical.position&&!i?e.elementShift+t+e.config.position.vertical.gap:e.elementShift-t-e.config.position.vertical.gap;var r="middle"===e.config.position.horizontal.position?"-50%":"0";if(e.config.animations.enabled&&e.config.animations.shift.speed>0){var a={keyframes:[{transform:"translate3d( "+r+", "+e.elementShift+"px, 0 )"},{transform:"translate3d( "+r+", "+s+"px, 0 )"}],options:{duration:e.config.animations.shift.speed,easing:e.config.animations.shift.easing,fill:"forwards"}};e.elementShift=s,e.element.animate(a.keyframes,a.options).onfinish=function(){n()}}else e.renderer.setStyle(e.element,"transform","translate3d( "+r+", "+s+"px, 0 )"),e.elementShift=s,n()}))},t.prototype.onClickDismiss=function(){this.dismiss.emit(this.notification.id)},t.prototype.onNotificationMouseover=function(){"pauseAutoHide"===this.config.behaviour.onMouseover?this.pauseAutoHideTimer():"resetAutoHide"===this.config.behaviour.onMouseover&&this.stopAutoHideTimer()},t.prototype.onNotificationMouseout=function(){"pauseAutoHide"===this.config.behaviour.onMouseover?this.continueAutoHideTimer():"resetAutoHide"===this.config.behaviour.onMouseover&&this.startAutoHideTimer()},t.prototype.onNotificationClick=function(){"hide"===this.config.behaviour.onClick&&this.onClickDismiss()},t.prototype.startAutoHideTimer=function(){var t=this;!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.start(this.config.behaviour.autoHide).then((function(){t.onClickDismiss()}))},t.prototype.pauseAutoHideTimer=function(){!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.pause()},t.prototype.continueAutoHideTimer=function(){!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.continue()},t.prototype.stopAutoHideTimer=function(){!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.stop()},t.prototype.setup=function(){"left"===this.config.position.horizontal.position?this.renderer.setStyle(this.element,"left",this.config.position.horizontal.distance+"px"):"right"===this.config.position.horizontal.position?this.renderer.setStyle(this.element,"right",this.config.position.horizontal.distance+"px"):(this.renderer.setStyle(this.element,"left","50%"),this.renderer.setStyle(this.element,"transform","translate3d( -50%, 0, 0 )")),"top"===this.config.position.vertical.position?this.renderer.setStyle(this.element,"top",this.config.position.vertical.distance+"px"):this.renderer.setStyle(this.element,"bottom",this.config.position.vertical.distance+"px"),this.renderer.addClass(this.element,"notifier__notification--"+this.notification.type),this.renderer.addClass(this.element,"notifier__notification--"+this.config.theme)},t}();function w(t,e){if(1&t){var n=i.ɵɵgetCurrentView();i.ɵɵelementStart(0,"li",1),i.ɵɵelementStart(1,"notifier-notification",2),i.ɵɵlistener("ready",(function(t){return i.ɵɵrestoreView(n),i.ɵɵnextContext().onNotificationReady(t)}))("dismiss",(function(t){return i.ɵɵrestoreView(n),i.ɵɵnextContext().onNotificationDismiss(t)})),i.ɵɵelementEnd(),i.ɵɵelementEnd()}if(2&t){var o=e.$implicit;i.ɵɵadvance(1),i.ɵɵproperty("notification",o)}}y.ɵfac=function(t){return new(t||y)(i.ɵɵdirectiveInject(i.ElementRef),i.ɵɵdirectiveInject(i.Renderer2),i.ɵɵdirectiveInject(f),i.ɵɵdirectiveInject(h),i.ɵɵdirectiveInject(m))},y.ɵcmp=i.ɵɵdefineComponent({type:y,selectors:[["notifier-notification"]],hostAttrs:[1,"notifier__notification"],hostBindings:function(t,e){1&t&&i.ɵɵlistener("click",(function(){return e.onNotificationClick()}))("mouseout",(function(){return e.onNotificationMouseout()}))("mouseover",(function(){return e.onNotificationMouseover()}))},inputs:{notification:"notification"},outputs:{ready:"ready",dismiss:"dismiss"},features:[i.ɵɵProvidersFeature([h])],decls:3,vars:2,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf","ngIfElse"],["predefinedNotification",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"notifier__notification-message"],["class","notifier__notification-button","type","button","title","dismiss",3,"click",4,"ngIf"],["type","button","title","dismiss",1,"notifier__notification-button",3,"click"],["viewBox","0 0 24 24","width","20","height","20",1,"notifier__notification-button-icon"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"]],template:function(t,e){if(1&t&&(i.ɵɵtemplate(0,d,1,4,"ng-container",0),i.ɵɵtemplate(1,v,3,2,"ng-template",null,1,i.ɵɵtemplateRefExtractor)),2&t){var n=i.ɵɵreference(2);i.ɵɵproperty("ngIf",e.notification.template)("ngIfElse",n)}},directives:[n.NgIf,n.NgTemplateOutlet],encapsulation:2,changeDetection:0});var b=function(){function t(t,i,e){var n=this;this.changeDetector=t,this.queueService=i,this.config=e.getConfig(),this.notifications=[],this.queueServiceSubscription=this.queueService.actionStream.subscribe((function(t){n.handleAction(t).then((function(){n.queueService.continue()}))}))}return t.prototype.ngOnDestroy=function(){this.queueServiceSubscription&&this.queueServiceSubscription.unsubscribe()},t.prototype.identifyNotification=function(t,i){return i.id},t.prototype.onNotificationDismiss=function(t){this.queueService.push({payload:t,type:"HIDE"})},t.prototype.onNotificationReady=function(t){var i=this.notifications[this.notifications.length-1];i.component=t,this.continueHandleShowAction(i)},t.prototype.handleAction=function(t){switch(t.type){case"SHOW":return this.handleShowAction(t);case"HIDE":return this.handleHideAction(t);case"HIDE_OLDEST":return this.handleHideOldestAction(t);case"HIDE_NEWEST":return this.handleHideNewestAction(t);case"HIDE_ALL":return this.handleHideAllAction(t);default:return new Promise((function(t,i){t()}))}},t.prototype.handleShowAction=function(t){var i=this;return new Promise((function(e,n){i.tempPromiseResolver=e,i.addNotificationToList(new o(t.payload))}))},t.prototype.continueHandleShowAction=function(t){var i=this,e=this.notifications.length;if(1===e)t.component.show().then(this.tempPromiseResolver);else{if(!1===this.config.behaviour.stacking||this.config.behaviour.stacking<2)this.notifications[0].component.hide().then((function(){i.removeNotificationFromList(i.notifications[0]),t.component.show().then(i.tempPromiseResolver)}));else{var n=[];if(e>this.config.behaviour.stacking){var o=this.notifications.slice(1,e-1);this.config.animations.enabled?!1!==this.config.animations.overlap&&this.config.animations.overlap>0?(n.push(this.notifications[0].component.hide()),setTimeout((function(){n.push(i.shiftNotifications(o,t.component.getHeight(),!0))}),this.config.animations.hide.speed-this.config.animations.overlap),setTimeout((function(){n.push(t.component.show())}),this.config.animations.hide.speed+this.config.animations.shift.speed-this.config.animations.overlap)):n.push(new Promise((function(e,n){i.notifications[0].component.hide().then((function(){i.shiftNotifications(o,t.component.getHeight(),!0).then((function(){t.component.show().then(e)}))}))}))):(n.push(this.notifications[0].component.hide()),n.push(this.shiftNotifications(o,t.component.getHeight(),!0)),n.push(t.component.show()))}else{var s=this.notifications.slice(0,e-1);this.config.animations.enabled?!1!==this.config.animations.overlap&&this.config.animations.overlap>0?(n.push(this.shiftNotifications(s,t.component.getHeight(),!0)),setTimeout((function(){n.push(t.component.show())}),this.config.animations.shift.speed-this.config.animations.overlap)):n.push(new Promise((function(e,n){i.shiftNotifications(s,t.component.getHeight(),!0).then((function(){t.component.show().then(e)}))}))):(n.push(this.shiftNotifications(s,t.component.getHeight(),!0)),n.push(t.component.show()))}Promise.all(n).then((function(){e>i.config.behaviour.stacking&&i.removeNotificationFromList(i.notifications[0]),i.tempPromiseResolver()}))}}},t.prototype.handleHideAction=function(t){var i=this;return new Promise((function(e,n){var o=[],s=i.findNotificationById(t.payload);if(void 0!==s){var r=i.findNotificationIndexById(t.payload);if(void 0!==r){var a=i.notifications.slice(0,r);a.length>0?i.config.animations.enabled&&i.config.animations.hide.speed>0?!1!==i.config.animations.overlap&&i.config.animations.overlap>0?(o.push(s.component.hide()),setTimeout((function(){o.push(i.shiftNotifications(a,s.component.getHeight(),!1))}),i.config.animations.hide.speed-i.config.animations.overlap)):s.component.hide().then((function(){o.push(i.shiftNotifications(a,s.component.getHeight(),!1))})):(o.push(s.component.hide()),o.push(i.shiftNotifications(a,s.component.getHeight(),!1))):o.push(s.component.hide()),Promise.all(o).then((function(){i.removeNotificationFromList(s),e()}))}else e()}else e()}))},t.prototype.handleHideOldestAction=function(t){return 0===this.notifications.length?new Promise((function(t,i){t()})):(t.payload=this.notifications[0].id,this.handleHideAction(t))},t.prototype.handleHideNewestAction=function(t){return 0===this.notifications.length?new Promise((function(t,i){t()})):(t.payload=this.notifications[this.notifications.length-1].id,this.handleHideAction(t))},t.prototype.handleHideAllAction=function(t){var i=this;return new Promise((function(t,e){var n=i.notifications.length;if(0!==n)if(i.config.animations.enabled&&i.config.animations.hide.speed>0&&!1!==i.config.animations.hide.offset&&i.config.animations.hide.offset>0)for(var o=function(e){var o="top"===i.config.position.vertical.position?n-1:e;setTimeout((function(){i.notifications[e].component.hide().then((function(){("top"===i.config.position.vertical.position&&0===e||"bottom"===i.config.position.vertical.position&&e===n-1)&&(i.removeAllNotificationsFromList(),t())}))}),i.config.animations.hide.offset*o)},s=n-1;s>=0;s--)o(s);else{var r=[];for(s=n-1;s>=0;s--)r.push(i.notifications[s].component.hide());Promise.all(r).then((function(){i.removeAllNotificationsFromList(),t()}))}else t()}))},t.prototype.shiftNotifications=function(t,i,e){return new Promise((function(n,o){if(0!==t.length){for(var s=[],r=t.length-1;r>=0;r--)s.push(t[r].component.shift(i,e));Promise.all(s).then(n)}else n()}))},t.prototype.addNotificationToList=function(t){this.notifications.push(t),this.changeDetector.markForCheck()},t.prototype.removeNotificationFromList=function(t){this.notifications=this.notifications.filter((function(i){return i.component!==t.component})),this.changeDetector.markForCheck()},t.prototype.removeAllNotificationsFromList=function(){this.notifications=[],this.changeDetector.markForCheck()},t.prototype.findNotificationById=function(t){return this.notifications.find((function(i){return i.id===t}))},t.prototype.findNotificationIndexById=function(t){var i=this.notifications.findIndex((function(i){return i.id===t}));return-1!==i?i:void 0},t}();function S(t){return new c(t)}function H(){return new c({})}b.ɵfac=function(t){return new(t||b)(i.ɵɵdirectiveInject(i.ChangeDetectorRef),i.ɵɵdirectiveInject(s),i.ɵɵdirectiveInject(f))},b.ɵcmp=i.ɵɵdefineComponent({type:b,selectors:[["notifier-container"]],hostAttrs:[1,"notifier__container"],decls:2,vars:2,consts:[["class","notifier__container-list",4,"ngFor","ngForOf","ngForTrackBy"],[1,"notifier__container-list"],[3,"notification","ready","dismiss"]],template:function(t,e){1&t&&(i.ɵɵelementStart(0,"ul"),i.ɵɵtemplate(1,w,2,1,"li",0),i.ɵɵelementEnd()),2&t&&(i.ɵɵadvance(1),i.ɵɵproperty("ngForOf",e.notifications)("ngForTrackBy",e.identifyNotification))},directives:[n.NgForOf,y],encapsulation:2,changeDetection:0});var x=function(){function t(){}return t.withConfig=function(i){return void 0===i&&(i={}),{ngModule:t,providers:[{provide:r,useValue:i},{deps:[r],provide:a,useFactory:S}]}},t}();x.ɵmod=i.ɵɵdefineNgModule({type:x}),x.ɵinj=i.ɵɵdefineInjector({factory:function(t){return new(t||x)},providers:[m,f,s,{provide:a,useFactory:H}],imports:[[n.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&i.ɵɵsetNgModuleScope(x,{declarations:[b,y],imports:[n.CommonModule],exports:[b]}),t.NotifierConfig=c,t.NotifierConfigToken=a,t.NotifierContainerComponent=b,t.NotifierModule=x,t.NotifierNotificationComponent=y,t.NotifierOptionsToken=r,t.NotifierService=f,t.notifierCustomConfigFactory=S,t.notifierDefaultConfigFactory=H,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-notifier.umd.min.js.map